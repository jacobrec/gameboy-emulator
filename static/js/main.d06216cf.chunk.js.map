{"version":3,"sources":["Emulator.ts","EmulatorComponent.tsx","iconComponents/DownButton.tsx","iconComponents/UpButton.tsx","iconComponents/LeftButton.tsx","iconComponents/RightButton.tsx","iconComponents/SelectButtonAngled.tsx","iconComponents/StartButtonAngled.tsx","iconComponents/AButton.tsx","iconComponents/BButton.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Button","Emulator","wasm","a","data","w","window","lf","localForage","has_loaded","this","init","button_down","e","button_up","b","console","log","save_state","save","date","Date","now","getItem","then","saves","push","setItem","length","load_state","update","EmulatorScreen","props","useState","romdata","setRomData","emulator","id","rom","useEffect","c","document","getElementById","ctx","getContext","imd","ImageData","ani","requestAnimationFrame","checker","time","set","Uint8ClampedArray","buffer","putImageData","cancelAnimationFrame","load_rom","emu","constructor","File","arrayBuffer","Uint8Array","width","height","SvgDownButton","data-name","xmlns","viewBox","x","y","rx","transform","strokeMiterlimit","fill","stroke","d","SvgUpButton","SvgLeftButton","SvgRightButton","SvgSelectButtonAngled","fontSize","fontFamily","fontWeight","SvgStartButtonAngled","letterSpacing","SvgAButton","cx","cy","r","SvgBButton","useStyles","makeStyles","theme","createStyles","root","display","drawer","breakpoints","up","flexShrink","appBar","zIndex","menuButton","marginRight","spacing","toolbar","mixins","drawerPaper","content","flexGrow","padding","FileSubmission","useForm","register","handleSubmit","errors","className","onSubmit","required","type","name","ref","GamePad","disabled","grid","onStop","defaultPosition","locations","UpButton","onClick","DUp","LeftButton","DLeft","RightButton","DRight","DownButton","DDown","SelectButtonAngled","Select","StartButtonAngled","Start","AButton","A","BButton","B","MenuItem","text","ListItem","button","ListItemIcon","children","ListItemText","primary","ResponsiveDrawer","classes","React","mobileOpen","setMobileOpen","handleDrawerToggle","drawerContent","Divider","List","load_save_state","make_save_state","Switch","checked","toggle","color","onChange","onGamepadChange","onKeyboardChange","modal","onDelete","CssBaseline","AppBar","position","Toolbar","IconButton","aria-label","edge","Typography","variant","noWrap","Hidden","smUp","implementation","Drawer","anchor","open","onClose","paper","ModalProps","keepMounted","xsDown","App","setRom","modalIsOpen","setModalIsOpen","isDraggableDisabled","setIsDraggableDisabled","JSON","parse","localStorage","left","down","right","start","select","controls","setControls","gamePadLocations","setGamePadLocations","decodeButton","keyString","handleKeyDown","event","butt","key","undefined","handleKeyUp","openKeyBindingModal","setOpenKeyBindingModal","keyBindingChangeModal","Modal","disableEnforceFocus","changeControls","value","prop","placeholder","addEventListener","removeEventListener","stringify","clear","Grid","direction","justify","alignItems","item","ms","Promise","resolve","setTimeout","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","rel","href"],"mappings":"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","file":"static/js/main.d06216cf.chunk.js","sourcesContent":["import localForage from 'localforage';\ninterface Wasm {\n    button_down: Function,\n    button_up: Function,\n    update: Function,\n    init: Function,\n    save_state: Function,\n    load_state: Function,\n}\n\nexport enum Button {\n    Start = 0,\n    Select,\n    DUp,\n    DDown,\n    DLeft,\n    DRight,\n    A,\n    B\n}\ninterface SaveState {\n    data: Uint8Array,\n    date: number,\n}\n\nexport default class Emulator {\n    wasm: Wasm | null = null\n\n    constructor() {\n        (async () => {\n          await import(\"rust/gameboy_emulator_bg.wasm\");\n          const wasm = await import(\"rust/gameboy_emulator\");\n          this.wasm = wasm;\n        })()\n    }\n\n    load_rom(data: Uint8Array) {\n        let w: any = window;\n        w.lf = localForage\n        if (!w.has_loaded) {\n            this.wasm?.init(data);\n            w.has_loaded = true;\n        }\n        w.button_down = (e: Button) => this.button_down(e)\n        w.button_up = (e: Button) => this.button_up(e)\n    }\n\n    button_down(b: Button): number {\n        console.log(\"Sending Button press: \", b);\n        return this.wasm?.button_down(b);\n    }\n    button_up(b: Button): number {\n        return this.wasm?.button_up(b);\n    }\n\n    make_save_state() {\n        let data: Uint8Array = this.wasm?.save_state();\n        let save: SaveState = {\n            date: Date.now(),\n            data\n        }\n        localForage.getItem(\"saves\").then((saves: any) => {\n            // saves: Array<SaveState> | null\n            if (saves === null) {\n                saves = []\n            }\n            saves.push(save)\n            localForage.setItem(\"saves\", saves)\n        })\n    }\n\n    load_save_state() {\n        localForage.getItem(\"saves\").then((saves: any) => {\n            // saves: Array<SaveState> | null\n            if (saves === null) {\n                console.log(\"No Saves to load from\");\n                return\n            }\n            let save = saves[saves.length - 1];\n            console.log(\"Loading save \", save);\n            this.wasm?.load_state(save.data);\n        })\n\n    }\n\n    update() {\n        // TODO: something with CPU timing\n        let cycles_per_frame = 70256;\n        let cycles_per_second = 4194304;\n        return this.wasm?.update(70256 / 2);\n    }\n\n}\n","import React, { useState, useEffect } from 'react';\nimport { Context } from 'vm';\nimport Emulator, { Button } from './Emulator';\n\n\ntype EmulatorProps = {\n    id: string,\n    rom: any,\n}\nexport const EmulatorScreen = (props: EmulatorProps) => {\n    let w: any = window;\n    let [romdata, setRomData] = useState(false)\n    let [emulator, setEmulator] = useState(new Emulator())\n    let { id, rom } = props;\n\n\n\n    useEffect(() => {\n        let d: Document = document;\n        let c: HTMLElement | null = d.getElementById(id) as HTMLCanvasElement;\n        let ctx: Context = null;\n        if (c !== null) {\n            let ca: HTMLCanvasElement = c as HTMLCanvasElement;\n            ctx = ca.getContext('2d');\n        }\n        let imd = new ImageData(160, 144);\n        let ani = 0;\n        let lt = 0;\n        const checker = (time: number) => {\n            let diff = time - lt;\n            lt = time;\n            // console.log(diff / 1000)\n            let data = emulator.update();\n            imd.data.set(new Uint8ClampedArray(data.buffer));\n            ctx.putImageData(imd, 0, 0);\n            ani = requestAnimationFrame(checker);\n        };\n        if (romdata) {\n            ani = requestAnimationFrame(checker);\n        }\n        return () => {\n            // window.clearInterval(inter)\n            cancelAnimationFrame(ani);\n        }\n    })\n\n    if (romdata) {\n        console.log(w.rom)\n        emulator.load_rom(w.rom)\n        w.emu = emulator;\n    } else if (rom.constructor === File) {\n        rom.arrayBuffer().then((e) => {\n            w.rom = new Uint8Array(e);\n            setRomData(true);\n        })\n    }\n\n    return (\n        <canvas id={id} width={160} height={144}></canvas>\n    )\n}\n","import * as React from \"react\";\n\nfunction SvgDownButton(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg\n      data-name=\"Layer 1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 127 127\"\n      width=\"1em\"\n      height=\"1em\"\n      {...props}\n    >\n      <rect\n        x={1.09}\n        y={0.77}\n        width={126}\n        height={126}\n        rx={7}\n        transform=\"rotate(-180 63.795 63.635)\"\n        strokeMiterlimit={10}\n        fill=\"#999\"\n        stroke=\"#999\"\n      />\n      <path\n        stroke=\"#000\"\n        strokeMiterlimit={10}\n        d=\"M61.94 112.27l49.32-53.26V14.73H15.74v44.28l46.2 53.26z\"\n      />\n    </svg>\n  );\n}\n\nexport default SvgDownButton;\n","import * as React from \"react\";\n\nfunction SvgUpButton(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg\n      data-name=\"Layer 1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 127 127\"\n      width=\"1em\"\n      height=\"1em\"\n      {...props}\n    >\n      <rect\n        x={0.5}\n        y={0.5}\n        width={126}\n        height={126}\n        rx={7}\n        strokeMiterlimit={10}\n        fill=\"#999\"\n        stroke=\"#999\"\n      />\n      <path\n        stroke=\"#000\"\n        strokeMiterlimit={10}\n        d=\"M65.06 14.73L15.74 67.99v44.28h95.52V67.99l-46.2-53.26z\"\n      />\n    </svg>\n  );\n}\n\nexport default SvgUpButton;\n","import * as React from \"react\";\n\nfunction SvgLeftButton(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg\n      data-name=\"Layer 1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 127 127\"\n      width=\"1em\"\n      height=\"1em\"\n      {...props}\n    >\n      <rect\n        x={1.09}\n        y={0.77}\n        width={126}\n        height={126}\n        rx={7}\n        transform=\"rotate(-90 63.66 63.93)\"\n        strokeMiterlimit={10}\n        fill=\"#999\"\n        stroke=\"#999\"\n      />\n      <path\n        stroke=\"#000\"\n        strokeMiterlimit={10}\n        d=\"M14.73 61.94l53.26 49.32h44.28V15.74H67.99l-53.26 46.2z\"\n      />\n    </svg>\n  );\n}\n\nexport default SvgLeftButton;\n","import * as React from \"react\";\n\nfunction SvgRightButton(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg\n      data-name=\"Layer 1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 127 127\"\n      width=\"1em\"\n      height=\"1em\"\n      {...props}\n    >\n      <rect\n        x={1.09}\n        y={0.77}\n        width={126}\n        height={126}\n        rx={7}\n        transform=\"rotate(90 63.93 63.34)\"\n        strokeMiterlimit={10}\n        fill=\"#999\"\n        stroke=\"#999\"\n      />\n      <path\n        stroke=\"#000\"\n        strokeMiterlimit={10}\n        d=\"M112.27 65.06L59.01 15.74H14.73v95.52h44.28l53.26-46.2z\"\n      />\n    </svg>\n  );\n}\n\nexport default SvgRightButton;\n","import * as React from \"react\";\n\nfunction SvgSelectButtonAngled(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg\n      data-name=\"Layer 1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 104 50\"\n      width=\"1em\"\n      height=\"1em\"\n      {...props}\n    >\n      <path\n        d=\"M92.47 17L12.61 47.76a7.3 7.3 0 01-9.54-4.53l-.32-.91a8 8 0 014.57-10L87.19 1.66a7.29 7.29 0 019.54 4.52l.32.91A8 8 0 0192.47 17z\"\n        fill=\"gray\"\n        stroke=\"gray\"\n        strokeMiterlimit={10}\n      />\n      <text\n        transform=\"matrix(.93 -.36 .36 .93 55.01 44.38)\"\n        fontSize={14}\n        fontFamily=\"AvantGarde-Medium,ITC Avant Garde Gothic\"\n        fontWeight={500}\n      >\n        {\"SELECT\"}\n      </text>\n    </svg>\n  );\n}\n\nexport default SvgSelectButtonAngled;\n","import * as React from \"react\";\n\nfunction SvgStartButtonAngled(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 96.14 48.08\"\n      width=\"1em\"\n      height=\"1em\"\n      {...props}\n    >\n      <path\n        d=\"M90.64 16.33L10.78 47.09a7.3 7.3 0 01-9.54-4.53l-.32-.91a8 8 0 014.57-10L85.36.99a7.29 7.29 0 019.54 4.52l.32.91a8 8 0 01-4.58 9.91z\"\n        fill=\"gray\"\n        stroke=\"gray\"\n        strokeMiterlimit={10}\n        data-name=\"Layer 1\"\n      />\n      <text\n        transform=\"matrix(.93 -.36 .36 .93 57.67 41.69)\"\n        fontSize={14}\n        fontFamily=\"AvantGarde-Medium,ITC Avant Garde Gothic\"\n        fontWeight={500}\n      >\n        {\"S\"}\n        <tspan x={6.99} y={0} letterSpacing=\"-.02em\">\n          {\"T\"}\n        </tspan>\n        <tspan x={12.33} y={0}>\n          {\"A\"}\n        </tspan>\n        <tspan x={21.91} y={0} letterSpacing=\".01em\">\n          {\"R\"}\n        </tspan>\n        <tspan x={30.44} y={0} letterSpacing={0}>\n          {\"T\"}\n        </tspan>\n      </text>\n    </svg>\n  );\n}\n\nexport default SvgStartButtonAngled;\n","import * as React from \"react\";\n\nfunction SvgAButton(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 125 125\"\n      width=\"1em\"\n      height=\"1em\"\n      {...props}\n    >\n      <circle\n        cx={62.5}\n        cy={62.5}\n        r={62}\n        fill=\"#91125c\"\n        stroke=\"#91125c\"\n        strokeMiterlimit={10}\n        data-name=\"Layer 1\"\n      />\n      <text\n        transform=\"translate(44.02 90.56)\"\n        fontSize={84}\n        fontFamily=\"FuturaBT-MediumCondensed,Futura Condensed BT\"\n        fontWeight={500}\n      >\n        {\"A\"}\n      </text>\n    </svg>\n  );\n}\n\nexport default SvgAButton;\n","import * as React from \"react\";\n\nfunction SvgBButton(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 125 125\"\n      width=\"1em\"\n      height=\"1em\"\n      {...props}\n    >\n      <circle\n        cx={62.5}\n        cy={62.5}\n        r={62}\n        fill=\"#91125c\"\n        stroke=\"#91125c\"\n        strokeMiterlimit={10}\n        data-name=\"Layer 1\"\n      />\n      <text\n        transform=\"translate(45.27 94.56)\"\n        fontSize={84}\n        fontFamily=\"FuturaBT-MediumCondensed,Futura Condensed BT\"\n        fontWeight={500}\n      >\n        {\"B\"}\n      </text>\n    </svg>\n  );\n}\n\nexport default SvgBButton;\n","import React, { useState, useEffect, useRef } from 'react';\nimport './App.css';\nimport Emulator, { Button } from './Emulator';\nimport { EmulatorScreen } from './EmulatorComponent';\nimport { useForm } from 'react-hook-form';\nimport Draggable, { DraggableData } from 'react-draggable';\n\n//Material UI imports\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Grid from '@material-ui/core/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport SaveIcon from '@material-ui/icons/Save';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport VideogameAssetIcon from '@material-ui/icons/VideogameAsset';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport Switch from '@material-ui/core/Switch';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\n//Icon imports\nimport DownButton from './iconComponents/DownButton';\nimport UpButton from './iconComponents/UpButton';\nimport LeftButton from './iconComponents/LeftButton';\nimport RightButton from './iconComponents/RightButton';\nimport SelectButtonAngled from './iconComponents/SelectButtonAngled';\nimport StartButtonAngled from './iconComponents/StartButtonAngled';\nimport AButton from './iconComponents/AButton';\nimport BButton from './iconComponents/BButton';\n\nconst drawerWidth = 240;\n\ninterface ControlObj {\n  up: string,\n  left: string,\n  down:string,\n  right:string,\n  a:string,\n  b:string,\n  start:string,\n  select:string\n}\n\nfunction parse_json(json: any): json is ControlObj {\n  return json;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n    },\n    drawer: {\n      [theme.breakpoints.up('sm')]: {\n        width: drawerWidth,\n        flexShrink: 0,\n      },\n    },\n    appBar: {\n      [theme.breakpoints.up('sm')]: {\n        zIndex: theme.zIndex.drawer + 1,\n      },\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        display: 'none',\n      },\n    },\n    // necessary for content to be below app bar\n    toolbar: theme.mixins.toolbar,\n    drawerPaper: {\n      width: drawerWidth,\n    },\n    content: {\n      flexGrow: 1,\n      padding: theme.spacing(3),\n    },\n  }),\n);\n\nfunction FileSubmission(props: any) {\n  const { register, handleSubmit, errors } = useForm();\n\n  return (\n    <div className=\"modal-box\">\n      <div className=\"modal-text\">\n        <h2>Load a Game</h2>\n        <form onSubmit={handleSubmit(props.onSubmit)} className=\"form\">\n          <input required type=\"file\" name=\"rom\" ref={register}/>\n          <button>Submit</button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nfunction GamePad(props: any) {\n\n  return (\n    <div className=\"gamepad\">\n      <Draggable \n      disabled={props.disabled} \n      grid={[10,10]} \n      onStop={(e, data) => props.onStop(\"upButton\", data)} \n      defaultPosition={{x: props.locations[\"upButton\"].x, y: props.locations[\"upButton\"].y}}\n      >\n        <div className=\"up\">\n          <UpButton className=\"icon-button\" onClick={() => props.onClick(Button.DUp)} />\n        </div>\n      </Draggable>\n\n      <Draggable \n      disabled={props.disabled} \n      grid={[10,10]} \n      onStop={(e, data) => props.onStop(\"leftButton\",data)}\n      defaultPosition={{x: props.locations[\"leftButton\"].x, y: props.locations[\"leftButton\"].y}}\n      >\n        <div className=\"left\">\n          <LeftButton className=\"icon-button\" onClick={() => props.onClick(Button.DLeft)}/>\n        </div>\n      </Draggable>\n\n      <Draggable \n      disabled={props.disabled} \n      grid={[10,10]} \n      onStop={(e, data) => props.onStop(\"rightButton\",data)}\n      defaultPosition={{x: props.locations[\"rightButton\"].x, y: props.locations[\"rightButton\"].y}}\n      >\n        <div className=\"right\">\n          <RightButton className=\"icon-button\" onClick={() => props.onClick(Button.DRight)}/>\n        </div>\n      </Draggable>\n\n      <Draggable \n      disabled={props.disabled} \n      grid={[10,10]} \n      onStop={(e, data) => props.onStop(\"downButton\",data)}\n      defaultPosition={{x: props.locations[\"downButton\"].x, y: props.locations[\"downButton\"].y}}\n      >\n        <div className=\"down\">\n          <DownButton className=\"icon-button\" onClick={() => props.onClick(Button.DDown)}/>\n        </div>\n      </Draggable>\n\n      <Draggable \n      disabled={props.disabled} \n      grid={[10,10]} \n      onStop={(e, data) => props.onStop(\"select\",data)}\n      defaultPosition={{x: props.locations[\"select\"].x, y: props.locations[\"select\"].y}}\n      >\n        <div className=\"select\">\n          <SelectButtonAngled className=\"start-select-button\" onClick={() => props.onClick(Button.Select)}/>\n        </div>\n      </Draggable>\n\n      <Draggable \n      disabled={props.disabled} \n      grid={[10,10]} \n      onStop={(e, data) => props.onStop(\"start\",data)}\n      defaultPosition={{x: props.locations[\"start\"].x, y: props.locations[\"start\"].y}}\n      >\n        <div className=\"start\">\n          <StartButtonAngled  className=\"start-select-button\" onClick={() => props.onClick(Button.Start)}/>\n        </div>\n      </Draggable>\n\n      <Draggable \n      disabled={props.disabled} \n      grid={[10,10]} \n      onStop={(e, data) => props.onStop(\"a\",data)}\n      defaultPosition={{x: props.locations[\"a\"].x, y: props.locations[\"a\"].y}}\n      >\n        <div className=\"a-button\">\n          <AButton className=\"icon-button\" onClick={() => props.onClick(Button.A)}/>\n        </div>\n      </Draggable>\n\n      <Draggable \n      disabled={props.disabled} \n      grid={[10,10]} \n      onStop={(e, data) => props.onStop(\"b\",data)}\n      defaultPosition={{x: props.locations[\"b\"].x, y: props.locations[\"b\"].y}}\n      >\n        <div className=\"b-button\">\n          <BButton className=\"icon-button\" onClick={() => props.onClick(Button.B)}/>\n        </div>\n      </Draggable>\n\n    </div>\n  );\n}\n\nfunction MenuItem (props: any) {\n  let {text, onClick} = props;\n  return (\n      <ListItem onClick={onClick} button key={text}>\n        <ListItemIcon>\n          {props.children}\n        </ListItemIcon>\n        <ListItemText primary={text} />\n      </ListItem>\n\n  )\n}\n\nfunction ResponsiveDrawer(props: any) {\n  const classes = useStyles();\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  \n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  let w: any = window;\n  const drawerContent = (\n    <div>\n      <div className={classes.toolbar} />\n      <Divider />\n      <List>\n        <MenuItem onClick={() => w.emu.load_save_state()} text={\"Load\"}><GetAppIcon/></MenuItem>\n        <MenuItem onClick={() => w.emu.make_save_state()} text={\"Save\"}><SaveIcon/></MenuItem>\n        <MenuItem text={\"Settings\"}><SettingsIcon/></MenuItem>\n        <ListItem button key={\"Configure GamePad\"}>\n          <ListItemIcon>\n            <VideogameAssetIcon/>\n          </ListItemIcon>\n          <ListItemText primary={\"Configure GamePad\"} />\n          <Switch \n            checked={!props.toggle}\n            color=\"default\"\n            onChange={props.onGamepadChange}\n          />\n        </ListItem>\n        <MenuItem onClick={props.onKeyboardChange} text={\"Configure Keyboard\"}><KeyboardIcon/> {props.modal} </MenuItem>\n        <MenuItem text={\"Delete User Data\"} onClick={props.onDelete}><DeleteIcon/></MenuItem>\n      </List>\n    </div>\n  );\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            edge=\"start\"\n            onClick={handleDrawerToggle}\n            className={classes.menuButton}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap>\n            {props.name}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <nav className={classes.drawer} aria-label=\"mailbox folders\">\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n            variant=\"temporary\"\n            anchor='left'\n            open={mobileOpen}\n            onClose={handleDrawerToggle}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true, // Better open performance on mobile.\n            }}\n          >\n            {drawerContent}\n          </Drawer>\n        </Hidden>\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            {drawerContent}\n          </Drawer>\n        </Hidden>\n      </nav>\n      <main className={classes.content}>\n      </main>\n    </div>\n  );\n}\n\nfunction App() {\n  let w: any = window;\n  const { register, handleSubmit} = useForm();\n  const [emulator, setEmulator] = useState(new Emulator());\n  const [rom, setRom] = useState({name: \"No File Selected\"});\n  const [modalIsOpen, setModalIsOpen] = useState(true);\n  const [isDraggableDisabled, setIsDraggableDisabled] = useState(true);\n  const [controls, setControls] = useState(\n    JSON.parse(localStorage.getItem('controls')) || {\n    up:'w',\n    left:'a',\n    down:'s',\n    right:'d',\n    a:'j',\n    b:'k',\n    start:' ',\n    select:'b',\n  });\n\n  const [gamePadLocations, setGamePadLocations] = useState(\n    JSON.parse(localStorage.getItem('gamePadLocations')) || {\n    \"upButton\": {x: null, y: null},\n    \"downButton\": {x: null, y: null},\n    \"leftButton\":{x: null, y: null},\n    \"rightButton\": {x: null, y: null},\n    \"start\": {x: null, y: null},\n    \"select\": {x: null, y: null},\n    \"a\": {x: null, y: null},\n    \"b\": {x: null, y: null},\n  })\n\n  const onSubmit = (data: any) => {\n    setModalIsOpen(false);\n    setRom(data.rom[0]);\n  };\n\n  const decodeButton = (keyString: string) => {\n    switch(keyString) {\n      case controls.up: return Button.DUp;\n      case controls.left: return Button.DLeft;\n      case controls.right: return Button.DRight;\n      case controls.down: return Button.DDown;\n      case controls.a: return Button.A;\n      case controls.b: return Button.B;\n      case controls.start: return Button.Start;\n      case controls.select: return Button.Select;\n      default: return undefined;\n    }\n  };\n\n  const handleKeyDown = (event: any) => {\n    let butt = decodeButton(event.key);\n    if (butt !== undefined) {\n      w.button_down(butt)\n    }\n  }\n  const handleKeyUp = (event: any) => {\n\n    let butt = decodeButton(event.key);\n    if (butt !== undefined) {\n      w.button_up(butt)\n    }\n  }\n\n  function sleep(ms: any) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  const handleClick = (button: Button) => {\n    w.button_down(button);\n    sleep(85).then(() => {w.button_up(button);});\n  }\n\n  const toggleGamePadMove = () => {\n    setIsDraggableDisabled(!isDraggableDisabled);\n  }\n\n  const [openKeyBindingModal, setOpenKeyBindingModal] = useState(false);\n\n\n  const handleClose = () => {\n    setOpenKeyBindingModal(false);\n  };\n\n  const handleKeyboardChange = () => {\n    setOpenKeyBindingModal(true);\n  }\n\n  const submittedChanges = (data: any) => {\n    let changeControls = (id: string, value: string) => {\n      switch(id) {\n        case \"up\": { setControls({...controls, \"up\": value}); break;}\n        case \"down\": { setControls({...controls, \"down\": value}); break;}\n        case \"left\": { setControls({...controls, \"left\": value}); break;}\n        case \"right\": { setControls({...controls, \"right\": value}); break;}\n        case \"a\": { setControls({...controls, \"a\": value}); break;}\n        case \"b\": { setControls({...controls, \"b\": value}); break;}\n        case \"start\": { setControls({...controls, \"start\": value}); break;}\n        case \"select\": { setControls({...controls, \"select\": value}); break;}\n        default: console.log(\"No such control exists\");\n      }\n    }\n    for(const prop in data) {\n      if (data[prop].length !== 0) {\n        changeControls(prop, data[prop]);\n      }\n    }\n    setOpenKeyBindingModal(false);\n  }\n\n  const keyBindingChangeModal = (\n    <Modal \n    open={openKeyBindingModal}\n    onClose={handleClose}\n    disableEnforceFocus\n    >\n      <div className=\"modal-box\">\n        <h2>Set Key Bindings</h2>\n        <form onSubmit={handleSubmit(submittedChanges)}>\n          <input name=\"up\" placeholder=\"up\" ref={register}></input> <br/>\n          <input name=\"down\" placeholder=\"down\" ref={register}></input> <br/>\n          <input name=\"left\" placeholder=\"left\" ref={register}></input> <br/>\n          <input name=\"right\" placeholder=\"right\" ref={register}></input> <br/>\n          <input name=\"a\" placeholder=\"a\" ref={register}></input> <br/>\n          <input name=\"b\" placeholder=\"b\" ref={register}></input> <br/>\n          <input name=\"start\" placeholder=\"start\" ref={register}></input> <br/>\n          <input name=\"select\" placeholder=\"select\" ref={register}></input> <br/>\n          <button>Save</button>\n        </form>\n      </div>\n    </Modal>\n  );\n\n  const handleGamePadChange = (id: string, data: DraggableData) => {\n\n    switch(id) {\n      case \"upButton\": {setGamePadLocations({...gamePadLocations, \"upButton\": {x: data.x, y: data.y}});\n        break;\n      }\n      case \"downButton\": {setGamePadLocations({...gamePadLocations, \"downButton\": {x: data.x, y: data.y}});\n        break;\n      }\n      case \"leftButton\": {setGamePadLocations({...gamePadLocations, \"leftButton\": {x: data.x, y: data.y}});\n        break;\n      }\n      case \"rightButton\": {setGamePadLocations({...gamePadLocations, \"rightButton\": {x: data.x, y: data.y}});\n        break;\n      }\n      case \"start\": {setGamePadLocations({...gamePadLocations, \"start\": {x: data.x, y: data.y}});\n        break;\n      }\n      case \"select\": {setGamePadLocations({...gamePadLocations, \"select\": {x: data.x, y: data.y}});\n        break;\n      }\n      case \"a\": {setGamePadLocations({...gamePadLocations, \"a\": {x: data.x, y: data.y}});\n        break;\n      }\n      case \"b\": {setGamePadLocations({...gamePadLocations, \"b\": {x: data.x, y: data.y}});\n        break;\n      }\n      default: console.log(\"No such button exists\");\n    }\n    \n\n  }\n\n  const removeLocalStorage = () => {\n    localStorage.clear();\n  }\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    }\n  }, [])\n\n  useEffect(() => {\n    localStorage.setItem('gamePadLocations', JSON.stringify(gamePadLocations));\n    return () => {\n      localStorage.setItem('gamePadLocations', JSON.stringify(gamePadLocations));\n    }\n  }, [gamePadLocations]);\n\n  useEffect(() => {\n    localStorage.setItem('controls', JSON.stringify(controls));\n  }, [controls]);\n\n  \n\n\n  return (\n    <div className=\"App\">\n      <Modal open={modalIsOpen}>\n        <FileSubmission onSubmit={onSubmit}/>\n      </Modal>\n      <ResponsiveDrawer \n        name={rom.name} \n        onGamepadChange={toggleGamePadMove} \n        onKeyboardChange={handleKeyboardChange} \n        onDelete={removeLocalStorage}\n        toggle={isDraggableDisabled}\n        modal={keyBindingChangeModal}\n      />\n      <Grid\n        direction=\"column\"\n        justify=\"center\"\n        alignItems=\"center\"\n      >\n        <Grid item>\n          <div className=\"screen\">\n          {\n             (rom.constructor === File) ?\n              <EmulatorScreen id={\"gb-emulator\"} rom={rom} />\n              : <p>Waiting for ROM</p>\n          }\n          </div>\n        </Grid>\n        <Divider/>\n        <Grid item>\n          <GamePad \n          onClick={handleClick} \n          disabled={isDraggableDisabled} \n          onStop={handleGamePadChange}\n          locations={gamePadLocations}\n        />\n        </Grid>\n      </Grid>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap\" />\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}